#include "platform.h"
#include "peripheral.h"

using audio::Audio_Driver;

int main() {
	init_platform();

	UART uart{ UART::instance() };
	Audio_Driver audio{ Audio_Driver::instance()};
	Rotary_enc Rot_enc{ Rotary_enc::instance() };
	Switch_arr SW_ARR{ Switch_arr::instance()};

    while (1) {
    	u8 idx0 = SW_ARR.SWx_State(1);
    	u8 idx1 = SW_ARR.SWx_State(2);

    	if(idx0 == ON_Changed || idx0 == OFF_Changed){
    		xil_printf("rechts, %d\r\n",ON_Changed);
    	}
    	usleep(10000);
    }
    cleanup_platform();
    return 0;
}

