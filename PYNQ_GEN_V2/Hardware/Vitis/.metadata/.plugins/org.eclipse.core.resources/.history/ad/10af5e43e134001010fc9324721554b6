#include "platform.h"
#include "peripheral.h"

using audio::Audio_Driver;

int main() {
	init_platform();

	UART uart{ UART::instance() };
	Audio_Driver audio{ Audio_Driver::instance()};

	constexpr u8 total_btns = 4;

	while (1) {
		for (u8 i = 1; i <= total_btns; ++i) {
			u8 state = BTN_ARR.BTNx_State(i);
			if (state == Switch_arr::ON_Changed) {
				xil_printf("BTN%u changed to: ON\r\n", i);
			} else if (state == Switch_arr::OFF_Changed) {
				xil_printf("BTN%u changed to: OFF\r\n", i);
			}
		}
		usleep(10000);
	}
    cleanup_platform();
    return 0;
}

